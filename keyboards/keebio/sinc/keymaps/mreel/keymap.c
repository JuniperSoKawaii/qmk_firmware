#include QMK_KEYBOARD_H
#include "mreel.h"

#define LAYOUT_wrapped(...) LAYOUT_80_with_macro(__VA_ARGS__)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [_DF_MAC] = LAYOUT_wrapped(
    KC_MPLY,          KC_ESC,  _________________FROW_1TO5_________________, KC_F6,            _________________FROW_7TO10_______, KC_F11,  KC_F12,  KC_DEL,  _______,
    KC_P1,   KC_P2,   KC_GRV,  ________________NUMBER_1TO5________________, KC_6,    ________________NUMBER_7TO0_______, KC_MINS, KC_EQL,  XXXXXXX, KC_BSPC, CK_HOME,
    KC_P3,   KC_P4,   KC_TAB,  _______________QWERTY_Q_TO_T_______________,          _______________QWERTY_Y_TO_P_______________, KC_LBRC, KC_RBRC, KC_BSLS, CK_END,
    KC_P5,   KC_P6,   CK_BWRD, _______________QWERTY_A_TO_G_______________,          _______________QWERTY_H_TO_SCLN____________, KC_QUOT,          KC_ENT,  KC_PGUP,
    KC_P7,   KC_P8,   KC_LSFT, _______________QWERTY_Z_TO_B_______________,          _______________QWERTY_N_TO_SLSH____________, TD(TD_SHAP),      KC_UP,   KC_PGDN,
    KC_P9,   KC_P0,   KC_HYPR, KC_LCTL, KC_LOPT, KC_LCMD, XXXXXXX,  KC_SPC,            MO(_NAV_FN1), _______, KC_RCMD, MO(_KEYB), XXXXXXX, KC_LEFT, KC_DOWN, KC_RGHT
  ),
  [_WIN] = LAYOUT_wrapped(
    _______,          _______, ___________________BLANK5__________________, _______,          ______________BLANK4______________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________, _______, ___________________BLANK5__________________, _______, XXXXXXX, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, KC_LGUI, KC_LALT, CK_WCMD, XXXXXXX, _______,            _______,  _______,    CK_WCMD, _______, XXXXXXX,    _______, _______, _______
  ),
  [_NAV_FN1] = LAYOUT_wrapped(
    _______,          _______, ___________________BLANK5__________________, _______,          ______________BLANK4______________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________, _______, ___________________BLANK5__________________, _______, XXXXXXX, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          KC_LEFT, KC_DOWN,  KC_UP, KC_RGHT,  _______, _______,          _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, _______, _______, _______, XXXXXXX, _______,            _______,  _______,    _______, _______, XXXXXXX,    _______, _______, _______
  ),
  [_KEYB] = LAYOUT_wrapped(
    _______,          RGB_TOG, ___________________BLANK5__________________, _______,          ______________BLANK4______________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________, _______, ___________________BLANK5__________________, _______, XXXXXXX, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    RESET,   _______, _______, _______, _______, _______, XXXXXXX, _______,            _______,  _______,    _______, _______, XXXXXXX,    _______, _______, _______
  ),
  /*
  [_WIN] = LAYOUT_wrapped(
    _______,          _______, ___________________BLANK5__________________, _______,          ______________BLANK4______________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________, _______, ___________________BLANK5__________________, _______, XXXXXXX, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______, _______, _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, ___________________BLANK5__________________,          ___________________BLANK5__________________, _______,          _______, _______,
    _____BLANK2_____, _______, _______, _______, _______, XXXXXXX, _______,            _______,  _______,    _______, _______, XXXXXXX,    _______, _______, _______
  ),
  */
};

/*
TODO: 
- MAC-Windows toggle key
- CK_BWRD
- TD(SHAP) -> caps word
- CK_END
- CK_HOME -> CMD(arrow) on macos
- CK_WCMD -> wincommand: ctrl but alt when with tab
- encoders
- all the unicode stuff

  [_TEXT_BASE] = LAYOUT_80_with_macro(         // Useful for text editing + unicode symbols
    _______,                _______, _______,      _______,      _______,      _______, _______, _______,                   _______,      _______,      _______, _______, _______, _______,   _______, _______,
    X(SMLE), X(UDFC), XP(SUP2,SUP3),    HED1,         HED2,         HED3,         HED4,    HED5,    HED6,     _______,      _______,      _______,      _______, _______, _______,   KC_NO,   _______, _______,
    _______, _______,          SUPE, _______,XP(ACSE,ACCE),XP(UMSE,UMCE),XP(GRSE,GRCE), _______,              _______,XP(UMSU,UMCU),XP(UMSI,UMCI),XP(UMSO,UMCO), _______, _______, _______,   _______, _______,
    _______, _______,    C(KC_LEFT), _______,      _______,      _______,      _______, _______,                            KC_LEFT,      KC_DOWN,        KC_UP, KC_RGHT,  X(COL), _______,C(KC_RGHT), _______,
    _______, _______,       _______, _______,      _______,      _______,      _______, _______,                            _______,      _______,      _______,    ARRW, _______, _______,   _______, _______,
    _______, _______,       _______, _______,      _______,      _______,        KC_NO,UCIS_SYM,                            _______,      _______,      _______, _______,   KC_NO, _______,   _______, _______
  ),
*/

bool encoder_update_user(uint8_t index, bool clockwise) {
    if (index == 0) {
        if (clockwise) {
            tap_code(KC_PGDN);
        } else {
            tap_code(KC_PGUP);
        }
    } else if (index == 1) {
        if (clockwise) {
            tap_code(KC_VOLU);
        } else {
            tap_code(KC_VOLD);
        }
    }
    return false;
}
