#ifdef RGB_MATRIX_ENABLE
#include "alt.h"

#include "led_matrix.h"
#include "rgb_matrix.h"
#include "config_led.h"

// This table can be almost-automatically derived from ISSI3733_LED_MAP that is
// defined in config_led.h

// You can calculate the (0-244, 0-64) x/y values from the x/y values defined in
// ISSI3733_LED_MAP with the following formula:
//   uint8_t rgb_x = ((ISSI3733_LED_MAP[i].x - MIN_X) / (MAX_X - MIN_X)) * 224;
//   uint8_t rgb_y = ((ISSI3733_LED_MAP[i].y - MIN_Y) / (MAX_Y - MIN_Y)) * 64;
// Where the min/max vars are the minimum and maximum "bounds" of x/y values
// present in ISSI3733_LED_MAP
//
// The row/col values need to be manually tweaked though, compensating for the
// "empty" cells that are a product of larger keys
//
// There is a quick-and-dirty implementation of this under ledvis.html

const rgb_led g_rgb_leds[DRIVER_LED_TOTAL] = {
  { { (0)|(0  << 4) }, { 8,   14 }, 0 }, // KC_ESC
  { { (0)|(1  << 4) }, { 22,  14 }, 0 }, // KC_1
  { { (0)|(2  << 4) }, { 35,  14 }, 0 }, // KC_2
  { { (0)|(3  << 4) }, { 49,  14 }, 0 }, // KC_3
  { { (0)|(4  << 4) }, { 63,  14 }, 0 }, // KC_4
  { { (0)|(5  << 4) }, { 77,  14 }, 0 }, // KC_5
  { { (0)|(6  << 4) }, { 91,  14 }, 0 }, // KC_6
  { { (0)|(7  << 4) }, { 105, 14 }, 0 }, // KC_7
  { { (0)|(8  << 4) }, { 118, 14 }, 0 }, // KC_8
  { { (0)|(9  << 4) }, { 132, 14 }, 0 }, // KC_9
  { { (0)|(10 << 4) }, { 146, 14 }, 0 }, // KC_0
  { { (0)|(11 << 4) }, { 160, 14 }, 0 }, // KC_MINS
  { { (0)|(12 << 4) }, { 174, 14 }, 0 }, // KC_EQL
  { { (0)|(13 << 4) }, { 195, 14 }, 0 }, // KC_BSPC
  { { (0)|(14 << 4) }, { 215, 14 }, 0 }, // KC_DEL
  { { (1)|(0  << 4) }, { 11,  11 }, 0 }, // KC_TAB
  { { (1)|(1  << 4) }, { 28,  11 }, 0 }, // KC_Q
  { { (1)|(2  << 4) }, { 42,  11 }, 0 }, // KC_W
  { { (1)|(3  << 4) }, { 56,  11 }, 0 }, // KC_E
  { { (1)|(4  << 4) }, { 70,  11 }, 0 }, // KC_R
  { { (1)|(5  << 4) }, { 84,  11 }, 0 }, // KC_T
  { { (1)|(6  << 4) }, { 98,  11 }, 0 }, // KC_Y
  { { (1)|(7  << 4) }, { 112, 11 }, 0 }, // KC_U
  { { (1)|(8  << 4) }, { 125, 11 }, 0 }, // KC_I
  { { (1)|(9  << 4) }, { 139, 11 }, 0 }, // KC_O
  { { (1)|(10 << 4) }, { 153, 11 }, 0 }, // KC_P
  { { (1)|(11 << 4) }, { 167, 11 }, 0 }, // KC_LBRC
  { { (1)|(12 << 4) }, { 181, 11 }, 0 }, // KC_RBRC
  { { (1)|(13 << 4) }, { 198, 11 }, 0 }, // KC_BSLS
  { { (1)|(14 << 4) }, { 215, 11 }, 0 }, // KC_HOME
  { { (2)|(0  << 4) }, { 13,  8  }, 1 }, // KC_CAPS
  { { (2)|(1  << 4) }, { 32,  8  }, 0 }, // KC_A
  { { (2)|(2  << 4) }, { 46,  8  }, 0 }, // KC_S
  { { (2)|(3  << 4) }, { 60,  8  }, 0 }, // KC_D
  { { (2)|(4  << 4) }, { 73,  8  }, 0 }, // KC_F
  { { (2)|(5  << 4) }, { 87,  8  }, 0 }, // KC_G
  { { (2)|(6  << 4) }, { 101, 8  }, 0 }, // KC_H
  { { (2)|(7  << 4) }, { 115, 8  }, 0 }, // KC_J
  { { (2)|(8  << 4) }, { 129, 8  }, 0 }, // KC_K
  { { (2)|(9  << 4) }, { 143, 8  }, 0 }, // KC_L
  { { (2)|(10 << 4) }, { 156, 8  }, 0 }, // KC_SCLN
  { { (2)|(11 << 4) }, { 170, 8  }, 0 }, // KC_QUOT
  /* ________________________________ */ // ____
  { { (2)|(13 << 4) }, { 193, 8  }, 0 }, // KC_ENT
  { { (2)|(14 << 4) }, { 215, 8  }, 0 }, // KC_PGUP
  { { (3)|(0  << 4) }, { 16,  5  }, 0 }, // KC_LSFT
  /* ________________________________ */ // KC_Z
  { { (3)|(2  << 4) }, { 39,  5  }, 0 }, // KC_X
  { { (3)|(3  << 4) }, { 53,  5  }, 0 }, // KC_C
  { { (3)|(4  << 4) }, { 67,  5  }, 0 }, // KC_V
  { { (3)|(5  << 4) }, { 80,  5  }, 0 }, // KC_B
  { { (3)|(6  << 4) }, { 94,  5  }, 0 }, // KC_N
  { { (3)|(7  << 4) }, { 108, 5  }, 0 }, // KC_M
  { { (3)|(8  << 4) }, { 122, 5  }, 0 }, // KC_COMM
  { { (3)|(9  << 4) }, { 136, 5  }, 0 }, // KC_DOT
  { { (3)|(10 << 4) }, { 150, 5  }, 0 }, // KC_SLSH
  { { (3)|(11 << 4) }, { 163, 5  }, 0 }, // KC_RSFT
  { { (3)|(12 << 4) }, { 182, 5  }, 0 }, // ____
  { { (3)|(13 << 4) }, { 201, 5  }, 0 }, // KC_UP
  { { (3)|(14 << 4) }, { 215, 5  }, 0 }, // KC_PGDN
  { { (4)|(0  << 4) }, { 9,   1  }, 0 }, // KC_LCTL
  { { (4)|(1  << 4) }, { 27,  1  }, 0 }, // KC_LGUI
  { { (4)|(2  << 4) }, { 44,  1  }, 0 }, // KC_LALT
  /* ________________________________ */ // ____
  /* ________________________________ */ // ____
  /* ________________________________ */ // ____
  { { (4)|(6  << 4) }, { 96,  1  }, 0 }, // KC_SPC
  /* ________________________________ */ // ____
  /* ________________________________ */ // ____
  /* ________________________________ */ // ____
  { { (4)|(10 << 4) }, { 148, 1  }, 0 }, // KC_RALT
  { { (4)|(11 << 4) }, { 165, 1  }, 0 }, // MO(1)
  { { (4)|(12 << 4) }, { 188, 1  }, 0 }, // KC_LEFT
  { { (4)|(13 << 4) }, { 201, 1  }, 0 }, // KC_DOWN
  { { (4)|(14 << 4) }, { 215, 1  }, 0 }, // KC_RGHT

  // Underglow LEDs
  { { 255 }, { 1,   0  }, 0 },
  { { 255 }, { 15,  0  }, 0 },
  { { 255 }, { 31,  0  }, 0 },
  { { 255 }, { 47,  0  }, 0 },
  { { 255 }, { 63,  0  }, 0 },
  { { 255 }, { 79,  0  }, 0 },
  { { 255 }, { 95,  0  }, 0 },
  { { 255 }, { 112, 0  }, 0 },
  { { 255 }, { 128, 0  }, 0 },
  { { 255 }, { 144, 0  }, 0 },
  { { 255 }, { 160, 0  }, 0 },
  { { 255 }, { 176, 0  }, 0 },
  { { 255 }, { 192, 0  }, 0 },
  { { 255 }, { 208, 0  }, 0 },
  { { 255 }, { 222, 0  }, 0 },
  { { 255 }, { 224, 3  }, 0 },
  { { 255 }, { 224, 6  }, 0 },
  { { 255 }, { 224, 9  }, 0 },
  { { 255 }, { 224, 12 }, 0 },
  { { 255 }, { 222, 15 }, 0 },
  { { 255 }, { 191, 16 }, 0 },
  { { 255 }, { 179, 16 }, 0 },
  { { 255 }, { 167, 16 }, 0 },
  { { 255 }, { 153, 16 }, 0 },
  { { 255 }, { 139, 16 }, 0 },
  { { 255 }, { 125, 16 }, 0 },
  { { 255 }, { 112, 16 }, 0 },
  { { 255 }, { 98,  16 }, 0 },
  { { 255 }, { 84,  16 }, 0 },
  { { 255 }, { 70,  16 }, 0 },
  { { 255 }, { 56,  16 }, 0 },
  { { 255 }, { 42,  16 }, 0 },
  { { 255 }, { 28,  16 }, 0 },
  { { 255 }, { 1,   15 }, 0 },
  { { 255 }, { 0,   12 }, 0 },
  { { 255 }, { 0,   9  }, 0 },
  { { 255 }, { 0,   6  }, 0 },
  { { 255 }, { 0,   3  }, 0 },
};

#ifdef USB_LED_INDICATOR_ENABLE
void rgb_matrix_indicators_kb(void)
{
  led_matrix_indicators();
}
#endif // USB_LED_INDICATOR_ENABLE

#endif
