// Copyright 2022 Ruud Wijtvliet (@rwijtvliet)
//
// SPDX-License-Identifier: GPL-2.0-or-later
//
// good tutorial:
// https://precondition.github.io/home-row-mods

// #include "version.h"
// #include "keymap_german.h"
// #include "keymap_nordic.h"
// #include "keymap_french.h"
// #include "keymap_spanish.h"
// #include "keymap_hungarian.h"
// #include "keymap_swedish.h"
// #include "keymap_br_abnt2.h"
// #include "keymap_canadian_multilingual.h"
// #include "keymap_german_ch.h"
// #include "keymap_jp.h"
// #include "keymap_korean.h"
// #include "keymap_bepo.h"
// #include "keymap_italian.h"
// #include "keymap_slovenian.h"
// #include "keymap_lithuanian_azerty.h"
// #include "keymap_danish.h"
// // #include "keymap_norwegian.h"
// #include "keymap_portuguese.h"
// // #include "keymap_contributions.h"
// #include "keymap_czech.h"
// #include "keymap_romanian.h"
// #include "keymap_russian.h"
// #include "keymap_uk.h"
// #include "keymap_estonian.h"
// #include "keymap_belgian.h"
// #include "keymap_us_international.h"
// #include "keymap_croatian.h"
// #include "keymap_turkish_q.h"
// #include "keymap_slovak.h"

#undef lGAME
#define lGAME    XXXXXXX //disable game layer; too much memory


#define PREP_FOR_ERGODOX_IN(\
               _0L4      ,_0L3      ,_0L2      ,_0L1      ,_0L0      ,                      _0R0      ,_0R1      ,_0R2      ,_0R3      ,_0R4      ,\
               _1L4      ,_1L3      ,_1L2      ,_1L1      ,_1L0      ,                      _1R0      ,_1R1      ,_1R2      ,_1R3      ,_1R4      ,\
               _2L4      ,_2L3      ,_2L2      ,_2L1      ,_2L0      ,_2LI      ,_2RI      ,_2R0      ,_2R1      ,_2R2      ,_2R3      ,_2R4      ,\
               _3L4      ,_3L3      ,_3L2      ,_3L1      ,_3L0      ,_3LI      ,_3RI      ,_3R0      ,_3R1      ,_3R2      ,_3R3      ,_3R4      ) \
               \
    KC_ESC    ,KC_1      ,KC_2      ,KC_3      ,KC_4      ,KC_5      ,KC_CAPS   ,KC_INS    ,KC_6      ,KC_7      ,KC_8      ,KC_9      ,KC_0      ,lGAME     ,\
    fCOPY     ,_0L4      ,_0L3      ,_0L2      ,_0L1      ,_0L0      ,KC_TAB    ,KC_MPLY   ,_0R0      ,_0R1      ,_0R2      ,_0R3      ,_0R4      ,fCOPY     ,\
    fPASTE    ,_1L4      ,_1L3      ,_1L2      ,_1L1      ,_1L0      ,                      _1R0      ,_1R1      ,_1R2      ,_1R3      ,_1R4      ,fPASTE    ,\
    fCUT      ,_2L4      ,_2L3      ,_2L2      ,_2L1      ,_2L0      ,KC_MPRV   ,KC_MNXT   ,_2R0      ,_2R1      ,_2R2      ,_2R3      ,_2R4      ,fCUT      ,\
    KC_ESC    ,_3L4      ,_3L3      ,_3L2      ,_3L1      ,                                            _3R1      ,_3R2      ,_3R3      ,_3R4      ,KC_ENT    ,\
                                                           _2LI      ,_2RI      ,_2LI      ,_2RI      ,                                                       \
                                                                      KC_APP    ,KC_APP    ,                                                                  \
                                                _3L0      ,_3LI      ,XXXXXXX   ,XXXXXXX   ,_3RI      ,_3R0


#define PREP_FOR_ERGODOX(...)  PREP_FOR_ERGODOX_IN(__VA_ARGS__)
#define EXPAND_LAYOUT(x) LAYOUT_ergodox_pretty(x)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
[L_BASE] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_BASE)),
[L_BASE2] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_BASE2)),
[L_SYM] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_SYM)),
[L_NUM] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_NUM)),
[L_NAV] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_NAV)),
[L_NAV2] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_NAV2)),
[L_FUN] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_FUN)),
[L_FUN2] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_FUN2)),
[L_MOUSE] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_MOUSE)),
// [L_GAME] = EXPAND_LAYOUT(PREP_FOR_ERGODOX(LAYER_GAME)),
};


// --------------------------------- additional thingks for the lights ---------------------------------------------

enum custom_keycodes {
  RGB_SLD = EZ_SAFE_RANGE,
};

// extern bool g_suspend_state;
extern rgb_config_t rgb_matrix_config;

void keyboard_post_init_user(void) {
  rgb_matrix_enable();
}

const uint8_t PROGMEM ledmap[][DRIVER_LED_TOTAL][3] = {
    [L_BASE] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {14,255,255}, {33,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,205,155}, {0,0,0}, {0,0,0}, {0,0,0}, {154,255,255}, {154,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {14,255,255}, {141,255,233}, {33,255,255}, {0,0,0}, {0,0,0}, {14,255,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,205,155}, {0,0,0}, {0,0,0}, {0,0,0}, {154,255,255}, {154,255,255}, {0,0,0}, {0,0,0} },

    [L_BASE2] = {},// {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {14,255,255}, {33,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,205,155}, {0,0,0}, {0,0,0}, {0,0,0}, {154,255,255}, {154,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {14,255,255}, {141,255,233}, {33,255,255}, {0,0,0}, {0,0,0}, {14,255,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,205,155}, {0,0,0}, {0,0,0}, {0,0,0}, {154,255,255}, {154,255,255}, {0,0,0}, {0,0,0} },

    [L_SYM] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {0,245,245}, {0,245,245}, {219,255,255}, {41,255,255}, {41,255,255}, {0,245,245}, {0,245,245}, {41,255,255}, {219,255,255}, {41,255,255}, {0,245,245}, {0,245,245}, {219,255,255}, {41,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {41,255,255}, {219,255,255}, {219,255,255}, {219,255,255}, {219,255,255}, {0,0,0}, {219,255,255}, {219,255,255}, {219,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_NUM] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {141,255,233}, {141,255,233}, {141,255,233}, {141,255,233}, {41,255,255}, {41,255,255}, {141,255,233}, {141,255,233}, {141,255,233}, {41,255,255}, {41,255,255}, {141,255,233}, {141,255,233}, {141,255,233}, {41,255,255}, {154,255,255}, {0,0,0}, {0,205,155}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_NAV] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {41,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {41,255,255}, {152,255,255}, {152,255,255}, {152,255,255}, {152,255,255}, {41,255,255}, {0,255,255}, {27,126,255}, {27,126,255}, {27,126,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {41,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {41,255,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {41,255,255}, {0,255,255}, {27,126,255}, {219,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_NAV2] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {41,255,255}, {131,255,255}, {131,255,255}, {43,177,253}, {131,255,255}, {41,255,255}, {152,255,255}, {152,255,255}, {152,255,255}, {152,255,255}, {41,255,255}, {0,255,255}, {27,126,255}, {27,126,255}, {27,126,255}, {27,126,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {41,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {131,255,255}, {41,255,255}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,255}, {41,255,255}, {0,255,255}, {27,126,255}, {219,255,255}, {219,255,255}, {27,126,255}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_FUN] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,205,155}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {14,255,255}, {14,255,255}, {14,255,255}, {14,255,255}, {0,0,0}, {14,255,255}, {14,255,255}, {14,255,255}, {14,255,255}, {0,0,0}, {14,255,255}, {14,255,255}, {14,255,255}, {14,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_FUN2] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    [L_MOUSE] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {188,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {188,255,255}, {188,255,255}, {188,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {219,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {188,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {188,255,255}, {188,255,255}, {188,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {219,255,255}, {219,255,255}, {219,255,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

    // [L_GAME] = { {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,255}, {0,0,255}, {0,0,255}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0}, {0,0,0} },

};
// const uint8_t PROGMEM ledmap[][DRIVER_LED_TOTAL][2] = {
//     [L_BASE] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {33,255}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {141,233}, {33,255}, {0,0}, {0,0}, {14,255}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0} },
//     // [L_BASE2] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {33,255}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,205,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {141,233}, {33,255}, {0,0}, {0,0}, {14,255}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,205,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0} },

//     //[L_BASE2] = {},// {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {33,255}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,205,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {141,233}, {33,255}, {0,0}, {0,0}, {14,255}, {0,255}, {0,255}, {0,255}, {0,255}, {0,0}, {0,205,155}, {0,0}, {0,0}, {0,0}, {154,255}, {154,255}, {0,0}, {0,0} },

//     [L_SYM] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {219,255}, {0,245}, {0,245}, {219,255}, {41,255}, {41,255}, {0,245}, {0,245}, {41,255}, {219,255}, {41,255}, {0,245}, {0,245}, {219,255}, {41,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {41,255}, {219,255}, {219,255}, {219,255}, {219,255}, {0,0}, {219,255}, {219,255}, {219,255}, {219,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0} },

//     [L_NUM] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {141,233}, {141,233}, {141,233}, {141,233}, {41,255}, {41,255}, {141,233}, {141,233}, {141,233}, {41,255}, {41,255}, {141,233}, {141,233}, {141,233}, {41,255}, {154,255}, {0,0}, {0,155}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {219,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0} },

//     [L_NAV] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {41,255}, {131,255}, {131,255}, {131,255}, {131,255}, {41,255}, {152,255}, {152,255}, {152,255}, {152,255}, {41,255}, {0,255}, {27,255}, {27,255}, {27,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {41,255}, {131,255}, {131,255}, {131,255}, {131,255}, {41,255}, {0,255}, {0,255}, {0,255}, {0,255}, {41,255}, {0,255}, {27,255}, {219,255}, {219,255}, {0,0}, {0,0}, {0,0}, {0,0} },

//     // [L_NAV2] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {41,255}, {131,255}, {131,255}, {43,177,253}, {131,255}, {41,255}, {152,255}, {152,255}, {152,255}, {152,255}, {41,255}, {0,255}, {27,255}, {27,255}, {27,255}, {27,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {41,255}, {131,255}, {131,255}, {131,255}, {131,255}, {41,255}, {0,255}, {0,255}, {0,255}, {0,255}, {41,255}, {0,255}, {27,255}, {219,255}, {219,255}, {27,255}, {0,0}, {0,0}, {0,0} },

//     [L_FUN] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,155}, {0,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {14,255}, {14,255}, {14,255}, {14,255}, {0,0}, {14,255}, {14,255}, {14,255}, {14,255}, {0,0}, {14,255}, {14,255}, {14,255}, {14,255}, {0,0}, {0,0}, {0,0}, {0,0} },

//     // [L_FUN2] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0}, {10,225,255}, {10,225,255}, {10,225,255}, {10,225,255}, {0,0}, {0,0}, {0,0}, {0,0} },

//     [L_MOUSE] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {219,255}, {188,255}, {219,255}, {0,0}, {0,0}, {188,255}, {188,255}, {188,255}, {0,0}, {0,0}, {0,0}, {219,255}, {219,255}, {219,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {219,255}, {188,255}, {219,255}, {0,0}, {0,0}, {188,255}, {188,255}, {188,255}, {0,0}, {0,0}, {0,0}, {219,255}, {219,255}, {219,255}, {0,0}, {0,0}, {0,0}, {0,0} },

//     [L_GAME] = { {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,255}, {0,0}, {0,0}, {0,255}, {0,255}, {0,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,255}, {0,0}, {0,0}, {0,0}, {0,255}, {0,255}, {0,255}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0}, {0,0} },

// };

void set_layer_color(int layer) {

  for (int i = 0; i < DRIVER_LED_TOTAL; i++) {
    HSV hsv = {
      .h = pgm_read_byte(&ledmap[layer][i][0]),
      .s = pgm_read_byte(&ledmap[layer][i][1]),
      .v = pgm_read_byte(&ledmap[layer][i][2]),
    };
    if (!hsv.h && !hsv.s && !hsv.v) {
        rgb_matrix_set_color( i, 0, 0, 0 );
    } else {
        RGB rgb = hsv_to_rgb( hsv );
        float f = (float)rgb_matrix_config.hsv.v / UINT8_MAX;
        rgb_matrix_set_color( i, f * rgb.r, f * rgb.g, f * rgb.b );
    }
  }
}


// void rgb_matrix_indicators_user(void) {
// //   if (g_suspend_state || keyboard_config.disable_layer_led) { return; }
//   switch (biton32(layer_state)) {
//     case 0:
//       set_layer_color(0);
//       break;
//     case 1:
//       set_layer_color(1);
//       break;
//     case 2:
//       set_layer_color(2);
//       break;
//     case 3:
//       set_layer_color(3);
//       break;
//     case 4:
//       set_layer_color(4);
//       break;
//     case 5:
//       set_layer_color(5);
//       break;
//     case 6:
//       set_layer_color(6);
//       break;
//     case 7:
//       set_layer_color(7);
//       break;
//     case 8:
//       set_layer_color(8);
//       break;
//    default:
//     if (rgb_matrix_get_flags() == LED_FLAG_NONE)
//       rgb_matrix_set_color_all(0, 0, 0);
//     break;
//   }
// }
void rgb_matrix_indicators_user(void) {
  //if (g_suspend_state || keyboard_config.disable_layer_led) { return; }
  uint8_t bitval = biton32(layer_state);
  if (bitval <= 8) {
      set_layer_color(bitval);
  } else if (rgb_matrix_get_flags() == LED_FLAG_NONE) {
      rgb_matrix_set_color_all(0, 0, 0);
  }
}

// uint32_t layer_state_set_user(uint32_t state) {
//   ergodox_board_led_off();
//   ergodox_right_led_1_off();
//   ergodox_right_led_2_off();
//   ergodox_right_led_3_off();
//   return state;
// };
