# Keymap - вопросы и ответы


Часто возникающие в процессе создания раскладок вопросы.
(Перед прочтением сначала лучше ознакомиться с [Keymap Overview](https://docs.qmk.fm/#/keymap).)

## Какие коды клавиш, кейкоды (keycodes) можно использовать?

См. Раздел [«Keycodes»](https://docs.qmk.fm/#/keycodes) для получения списка доступных кейкодов. Они содержат ссылки на более обширную документацию, если таковая имеется.
Коды клавиш фактически определены в common/keycode.h.

## Какие кейкоды используются "по умолчанию"?

В мире используются 3 стандартные раскладки клавиатуры: ANSI, ISO и JIS. Северная Америка в основном использует ANSI, Европа и Африка в первую очередь используют ISO, а Япония использует JIS. 
Не упомянутые регионы обычно используют ANSI или ISO. Коды клавиш, соответствующие этим раскладкам, показаны здесь:

![стандартные раскладки клавиатуры](https://i.imgur.com/5wsh5wM.png)

## Как назвать свои сложно-составные кей-коды для клавиш?

Иногда необходимо дать собственные обозначения некоторым кей-кодам. Чаще всего они, эти "имена", даются с помощью #define.
Например:
```c
#define FN_CAPS LT(_FL, KC_CAPSLOCK)
#define ALT_TAB LALT(KC_TAB)
```

Это позволит использовать FN_CAPS и ALT_TAB в вашей раскладке, и сделать ее более читаемой.

## Некоторые из моих клавиш "поменялись местами" или не работают. Что делать?

QMK имеет две функции, Bootmagic и Command, которые позволяют вам изменять поведение клавиатуры "на лету". 
Это включает, но не ограничивается, заменой Ctrl/Caps, отключением Gui, заменой Alt/Gui, заменой Backspace/Backslash, отключением всех клавиш, и другими поведенческими модификациями.
В качестве быстрого решения попробуйте удерживать клавиши Space + Backspace при подключении клавиатуры. 
Это приведет к сбросу сохраненных настроек на вашей клавиатуре, и эти клавиши вернутся к нормальной работе. Если это не сработает, посмотрите здесь:
* [Bootmagic](https://docs.qmk.fm/#/feature_bootmagic)
* [Command](https://docs.qmk.fm/#/feature_command)

## Клавиша "меню" не работает

Клавиша на большинстве современных клавиатур, расположенная между KC_RGUI и KC_RCTL, на самом деле называется KC_APP. 
Это связано с тем, что когда она появилась, в соответствующих стандартах уже была клавиша с именем MENU, и поэтому MS решила назвать его кейкодом APP.

## KC_SYSREQ не работает

Используйте для функции PrintScreen кей-код (KC_PSCREEN или KC_PSCR) вместо KC_SYSREQ. 
Сочетание клавиш «Alt + Print Screen» распознается как «Системный запрос».
См "задачу" #168 и
    <http://en.wikipedia.org/wiki/Magic_SysRq_key>
    <http://en.wikipedia.org/wiki/System_request>

## Клавиши питания не работают

Несколько сбивает с толку то, что в QMK есть два кода клавиш «Power»: KC_POWER на стороне HID-клавиатуры/клавиатуры и KC_SYSTEM_POWER (или KC_PWR) на стороне ОС.
Первый кей-код распознается только в macOS, в то время как второй, как и KC_SLEP, и KC_WAKE, поддерживаются всеми тремя основными операционными системами, и поэтому рекомендуется использовать именно их. 
В Windows эти клавиши работают непосредственно, однако в macOS их нужно удерживать, пока не появится диалоговое окно.


## Модификатор One Shot

Касается личной "проблемы" автора этих строк. Он часто ошибочно набирал «the» или «THe» вместо «The». One Shot Shift частично решает этот вопрос <https://github.com/tmk/tmk_keyboard/issues/67>


## Модификатор или слой завис

Клавиши-модификаторы, или слои могут зависнуть, если переключение слоев не настроено должным образом.
Для клавиш-модификаторов и действий слоя, вы должны поместить KC_TRANS в ту же самую позицию "целевого" слоя, чтобы отменить регистрацию клавиши-модификатора, или вернуться к предыдущему слою при событии от/нажатия.

При задействовании клавиш-модификаторов и переключении слоёв вы должны поместить кей-код KC_TRANS в соответственные позиции нужного слоя, чтобы оставить этот модификатор доступным для использования.

    <https://github.com/tmk/tmk_core/blob/master/doc/keymap.md#31-momentary-switching>
    <http://geekhack.org/index.php?topic=57008.msg1492604#msg1492604>
    <https://github.com/tmk/tmk_keyboard/issues/248>

## Поддержка Mechanical Lock с помощью свичей

Эта функция доступна для механического включения блокировки(чего?), такого как, на Alps. Вы можете включить это, добавив это в свой config.h:
```c
#define LOCKING_SUPPORT_ENABLE
#define LOCKING_RESYNC_ENABLE
```

После включения этой функции, используйте коды клавиш KC_LCAP, KC_LNUM и KC_LSCR в вашей таблице клавиш (keymap).
На старых механических клавиатурах иногда есть блокировка/включение слоя, а на современных - такого нет. В большинстве случаев эта функция не нужна, и можно просто использовать кейкоды KC_CAPS, KC_NLCK и KC_SLCK.

## Ввод спецсимволов, которых нет в таблице ASCII, например как Cédille ‘Ç’

Смотрите [функции, связанные с Unicode](https://docs.qmk.fm/#/feature_unicode)

---

Ответы на остальные вопросы могут быть в [оригинальном файле](https://github.com/qmk/qmk_firmware/tree/master/docs/faq_keymap.md).
